# Конфигурация сети

## 1. Предисловие

Перед выполнением любых действий убедитесь, что установлен драйвер сетевой карты.

## 2. Кабельные соединения

К наиболее распространенным типам кабелей относятся UTP, FTP, STP, S/FTP, S/STP, а также стандарты cat5, cat5e, cat6, cat6a, cat7 и cat8. Идеальным и самым дорогим вариантом является использование экранированного кабеля cat8 (STP) длиной не более 50 см. В случае ограниченного бюджета (и низкой скорости интернета) рекомендуется обратить внимание на экранированные кабели cat5e или cat6 (STP или S/STP). Это обеспечит более стабильное соединение с сетью.

## 3. Важные факты (о которых мало кто знает)

Производство всех сетевых адаптеров в Китае стоит около 5 долларов. Смена провайдера трафика с циклического на более чувствительный к задержкам может привести к увеличению скорости соединения до ±500 раз. Многие провайдеры используют агрегацию пакетов, что позволяет увеличить скорость загрузки за счет объединения нескольких пакетов в один. Некоторые сетевые карты, например Solarflare, имеют время задержки, которое может повлиять на производительность.

## 4. Выберите сетевой адаптер

Если у вас установлен адаптер Realtek, вы можете столкнуться с проблемами, в то время как адаптеры Intel обычно обеспечивают надежную работу. Предпочтительным вариантом является использование встроенных сетевых адаптеров Intel или внешних адаптеров той же марки. Не забывайте периодически обновлять драйверы для сетевого адаптера (LAN/WI-FI), загружая их с официального сайта производителя материнской платы.

## 5. Немного теории

- **Скорость Интернета** определяется как количество битов информации, передаваемых в секунду, и измеряется в килобитах в секунду (Кбит/с), мегабитах в секунду (Мбит/с) или гигабитах в секунду (Гбит/с). Можно выполнить [тест скорости Интернета](http://www.dslreports.com/speedtest).

- **Потеря пакетов** происходит, когда один или несколько пакетов не достигают адреса назначения во время передачи данных. Вы можете выполнить [тест потери пакетов](https://packetlosstest.com).

- **Чрезмерная буферизация сети** может привести к увеличению задержки и джиттера, а также к снижению пропускной способности. Можно выполнить тест на чрезмерную [сетевую буферизацию](https://www.waveform.com/tools/bufferbloat).

## 6. Настройка сетевых адаптеров Intel и Realtek

Сетевые адаптеры играют важную роль в обеспечении стабильного и быстрого соединения с интернетом. В этом руководстве мы рассмотрим настройки сетевых адаптеров Intel и Realtek, а также их функциональные возможности и отличия. Следует отметить, что сетевые адаптеры Realtek часто уступают адаптерам Intel по производительности и функциональности.

### 1. Общая информация о сетевых адаптерах

- **Сетевые адаптеры Intel**: Эти адаптеры известны своей высокой производительностью, надежностью и поддержкой современных технологий. Они предлагают множество функций, которые помогают оптимизировать использование энергии и улучшить производительность.

- **Сетевые адаптеры Realtek**: Хотя адаптеры Realtek широко распространены и доступны по более низкой цене, они могут не поддерживать все функции, которые обеспечивают более эффективное управление энергией и производительностью, что делает их менее предпочтительными для высоконагруженных задач.

### 2. Основные параметры настройки

#### 2.1. Энергосбережение

- **GIGABIT LITE**: Эта функция позволяет адаптеру работать на скорости до 1 Гбит/с, обеспечивая при этом оптимальное энергопотребление. Это особенно полезно для домашних пользователей и малых офисов.

- **GIGABIT ETHERNET**: Поддержка гигабитного Ethernet позволяет адаптеру передавать данные на высокой скорости, что критично для потокового видео и онлайн-игр.

- **DISABLED ADVANCED EEE**: Отключение расширенного режима энергосбережения может улучшить производительность в условиях высокой нагрузки, так как адаптер не будет переходить в режим низкого энергопотребления.

- **ENERGY EFFICIENT ETHERNET (EEE)**: Эта функция позволяет адаптеру переходить в режим низкого энергопотребления между всплесками сетевого трафика. Однако для экономии энергии оба конца соединения должны поддерживать EEE. Это может привести к небольшой задержке при восстановлении полной мощности.

- **SYSTEM IDLE POWER SAVER**: Этот режим помогает снизить потребление энергии, когда система простаивает, что может быть полезно для ноутбуков и других мобильных устройств.

- **POWER SAVING MODE**: Режим энергосбережения, который может быть полезен для снижения общего потребления энергии, особенно в условиях, когда не требуется высокая скорость передачи данных.

- **ULTRA LOW POWER MODE**: Позволяет адаптеру работать в режиме минимального энергопотребления, что может быть полезно для мобильных устройств, продлевая время работы от батареи.

- **REDUCE SPEED ON POWER DOWN**: Снижение скорости передачи данных при отключении питания может помочь сохранить ресурсы и предотвратить перегрев адаптера.

- **SELECTIVE SUSPEND**: Позволяет адаптеру приостанавливать работу, когда он не используется, что также способствует экономии энергии.

#### 2.2. Управление трафиком

- **Adaptive Inter-Frame Spacing**: Эта настройка помогает компенсировать чрезмерные коллизии Ethernet-пакетов в сети. По умолчанию она работает лучше всего для большинства компьютеров и сетей. Включение этой функции позволяет адаптеру динамически адаптироваться к условиям сетевого трафика.

- **Flow Control**: Включение этой функции позволяет адаптерам более эффективно регулировать трафик. Адаптеры генерируют кадры управления потоком, когда их очереди приема достигают предопределенного лимита. Это помогает предотвратить потерю пакетов, особенно в условиях высокой нагрузки.

#### 2.3. Оптимизация производительности

- **IPv4 Checksum Offload**: Эта настройка позволяет адаптеру вычислять контрольную сумму IPv4 для входящих и исходящих пакетов. Это улучшает производительность приема и передачи IPv4 и снижает использование CPU. При отключении Offloading операционная система проверяет контрольную сумму, что может увеличить нагрузку на процессор.

- **Large Send Offload (IPv4 и IPv6)**: Эта функция позволяет адаптеру сегментировать TCP-сообщения в действительные Ethernet-кадры. Максимальный размер кадра для Large Send Offload составляет 64,000 байт. Поскольку аппаратное обеспечение адаптера может выполнять сегментацию данных гораздо быстрее, чем программное обеспечение операционной системы, эта функция может значительно улучшить производительность передачи и снизить использование ресурсов CPU.

- **Log Link State Event**: Эта настройка позволяет включать или отключать ведение журнала изменений состояния соединения. Если включено, события изменения состояния соединения (например, "ссылка установлена" или "ссылка разорвана) будут записываться в системный журнал событий. Это может быть полезно для администраторов, чтобы отслеживать состояние сетевого соединения и выявлять возможные проблемы. В журнале фиксируются следующие события:
  - Ссылка установлена.
  - Ссылка разорвана.
  - Несоответствие в дуплексе.
  - Обнаружен протокол Spanning Tree.

- **Priority and VLAN**: Эта функция позволяет отправлять и получать кадры с тегами IEEE 802.3ac, включая теги 802.1p для приоритета и теги 802.1Q для VLAN. При включении этой функции теги пакетов используют настройки очередей, определенные операционной системой. Однако стоит отметить, что изменение этих параметров может не оказать значительного влияния на производительность, так как они часто являются плацебо.

- **PTP Hardware Timestamp**: Эта настройка позволяет приложениям, использующим PTPv2 (Precision Time Protocol), использовать аппаратные временные метки для синхронизации часов в вашей сети. Если эта настройка включена, она имеет приоритет над программной временной меткой.

#### 2.4. Улучшение производительности системы

- **Receive Side Scaling (RSS)**: Эта технология позволяет эффективно распределять обработку входящего сетевого трафика между несколькими процессорами в многопроцессорных системах. RSS помогает уменьшить задержки обработки, перераспределяя нагрузку на несколько ЦП, что предотвращает перегрузку одного из них. Основные преимущества RSS включают:
  - **Распределенная обработка**: Обработка входящих данных распределяется между несколькими ЦП, что повышает общую производительность системы.
  - **Обработка в порядке поступления**: RSS сохраняет порядок доставки полученных пакетов, что важно для некоторых приложений.
  - **Динамическое балансирование нагрузки**: RSS позволяет перераспределять сетевую нагрузку между ЦП в зависимости от текущей нагрузки системы.
  - **Поддержка MSI-X**: RSS с поддержкой MSI-X позволяет уменьшить накладные расходы на блокировку и перезагрузку кэшей, что также улучшает производительность.

### 3. Рекомендации по настройке

1. **Оставьте все параметры с Offload включенными**: Это позволит адаптерам более эффективно обрабатывать сетевой трафик и снизить нагрузку на систему.

2. **Используйте адаптеры Intel для высокопроизводительных задач**: Если вы планируете использовать сетевое соединение для ресурсоемких задач, таких как потоковая передача видео в высоком разрешении, онлайн-игры или работа с большими объемами данных, адаптеры Intel обеспечат более стабильное и быстрое соединение по сравнению с Realtek.

3. **Настройте параметры энергосбережения в зависимости от ваших нужд**: Если вы используете ноутбук или другое мобильное устройство, включение режимов энергосбережения, таких как **SYSTEM IDLE POWER SAVER** и **ULTRA LOW POWER MODE**, может значительно продлить время работы от батареи. Однако для стационарных ПК, работающих в условиях высокой нагрузки, может быть целесообразно отключить некоторые из этих функций для повышения производительности.

4. **Следите за обновлениями драйверов**: Регулярное обновление драйверов для сетевых адаптеров Intel и Realtek может улучшить производительность и стабильность соединения. Производители часто выпускают обновления, которые исправляют ошибки и добавляют новые функции.

5. **Тестируйте производительность**: Используйте инструменты для тестирования скорости интернета и потери пакетов, чтобы оценить производительность вашего сетевого адаптера. Это поможет вам определить, какие настройки работают лучше всего в вашей конкретной среде.


Сетевые адаптеры Intel и Realtek имеют свои преимущества и недостатки. Адаптеры Intel, как правило, предлагают более высокую производительность и лучшее управление энергией, что делает их предпочтительным выбором для пользователей, которым требуется надежное и быстрое соединение. В то время как адаптеры Realtek могут быть более доступными, они могут не обеспечивать такую же стабильность и функциональность, особенно в условиях высокой нагрузки.

При настройке сетевых адаптеров важно учитывать ваши конкретные потребности и условия использования. Правильная конфигурация параметров энергосбережения и управления трафиком может значительно улучшить производительность и эффективность вашего сетевого соединения.

## 7. Дополнительные рекомендации по настройке

- Убедитесь, что все изменения в реестре и параметры сетевого адаптера применяются корректно. Это поможет избежать проблем с подключением и производительностью сети.

- Если у вас возникли трудности с выполнением скрипта, проверьте наличие прав администратора и правильность написания команд.

- Рекомендуется периодически проверять обновления драйверов и системных компонентов, чтобы поддерживать оптимальную производительность системы.

- Для получения дополнительной информации о настройках сетевой подсистемы и их влиянии на производительность, ознакомьтесь с официальной документацией от Intel и Microsoft.

### Конфигурация для конкретной операционной системы

## Настройка NetworkThrottlingIndex

Перед тем как вносить изменения, убедитесь, что функция индекса регулирования сети включена. Это критически важно для оптимизации производительности сети и обеспечения качественного воспроизведения мультимедийного контента.

- **Рекомендация по значению**: Установите значение от 10 до 20 после запятой, например, 15–30 Мбит/с. Это значение позволяет сбалансировать пропускную способность и задержку.

## 3. Изменение настроек в реестре

>**⚠**
>  Я не утверждаю, что это идеальная конфигурация реестра и что у неё нет недостатков. При желании вы можете самостоятельно внести изменения в файл конфигурации. **Скрипт не восстанавливает настройки при изменении значений с "включено" на "выключено".**

### Шаги для изменения параметра NetworkThrottlingIndex:

1. **Открытие редактора реестра**:
   - Нажмите `Win + R`, введите `regedit` и нажмите `Enter`.

2. **Навигация к нужному пути**:
   - Перейдите к следующему пути:
     ```
     HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Multimedia\SystemProfile
     ```

3. **Изменение параметра**:
   - Найдите параметр `NetworkThrottlingIndex`.
   - Если параметр отсутствует, создайте новый:
     - Щелкните правой кнопкой мыши на правой панели, выберите `Создать` > `DWORD (32-бит)`.
     - Назовите его `NetworkThrottlingIndex`.

### Установка значений

- **Включено**: Установите значение `10` (десятичное).
- **Отключено**: Установите значение `0xFFFFFFFF` (шестнадцатеричное).

## 4. Проверка изменений

После внесения изменений рекомендуется проверить их влияние на производительность сети. Для этого можно использовать инструмент `xperf`, который позволяет захватывать данные DPC и анализировать их.

### Использование xperf для анализа DPC

1. **Установка Windows Performance Toolkit**:
   - Установите Windows Performance Toolkit, который входит в состав Windows SDK.

2. **Запуск захвата данных**:
   - Откройте командную строку с правами администратора.
   - Введите следующую команду для начала захвата:
     ```cmd
     xperf -start MySession -on DPC -stackwalk DPC -buffering 1024
     ```
   - Запустите приложение или игру, для которой вы хотите проверить производительность.

3. **Остановка захвата**:
   - После завершения теста введите:
     ```cmd
     xperf -stop MySession
     ```

4. **Анализ результатов**:
   - Сохраните результаты в файл:
     ```cmd
     xperf -save MySession.etl
     ```
   - Откройте файл в Windows Performance Analyzer (WPA) для анализа задержек DPC и других метрик.

Настройка NetworkThrottlingIndex может значительно повлиять на производительность сети и качество мультимедийного контента. Важно помнить, что отключение этой функции может привести к увеличению задержки DPC, что негативно скажется на производительности приложений, требующих низкой задержки, таких как видеоигры.

### Рекомендации

- **Тестируйте изменения**: После внесения изменений обязательно проводите тестирование, чтобы оценить влияние на производительность.
- **Следите за показателями**: Обратите внимание на задержку и пропускную способность, чтобы найти оптимальные настройки для вашей системы.
- **Документируйте изменения**: Ведите записи о внесенных изменениях, чтобы в будущем можно было легко откатить настройки при необходимости.


### Библиотека групповых политик

```reg
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\NetCache]
"Enabled"=dword:00000000

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\LLTD]
"EnableRspndr"=dword:00000000
"AllowRspndrOnDomain"=dword:00000000
"AllowRspndrOnPublicNet"=dword:00000000
"ProhibitRspndrOnPrivateNet"=dword:00000000

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Policies\Microsoft\Windows\LLTD]
"EnableRspndr"=dword:00000000
"AllowRspndrOnDomain"=dword:00000000
"AllowRspndrOnPublicNet"=dword:00000000
"ProhibitRspndrOnPrivateNet"=dword:00000000

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\LLTD]
"EnableLLTDIO"=dword:00000000
"AllowLLTDIOOnDomain"=dword:00000000
"AllowLLTDIOOnPublicNet"=dword:00000000
"ProhibitLLTDIOOnPrivateNet"=dword:00000000

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\HotspotAuthentication]
"Enabled"=dword:00000000

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Policies\Microsoft\Windows\HotspotAuthentication]
"Enabled"=dword:00000000

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\System]
"EnableFontProviders"=dword:00000000

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Policies\Microsoft\Windows\System]
"EnableFontProviders"=dword:00000000

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\PeerDist\Service]
"Enable"=dword:00000000

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Policies\Microsoft\PeerDist\Service]
"Enable"=dword:00000000

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\BITS]
"EnablePeercaching"=dword:00000000
```

Следуя приведенным рекомендациям и настройкам, вы сможете оптимизировать свою сетевую конфигурацию для достижения максимальной производительности и стабильности интернет-соединения. Регулярно проверяйте и обновляйте настройки, чтобы адаптироваться к изменениям в вашем оборудовании и программном обеспечении. Помните, что правильная настройка сетевых параметров может значительно улучшить ваш опыт в играх и других сетевых приложениях.

## 8. Выбор правильного маршрутизатора

Одним из ключевых элементов стабильного и быстрого интернет-соединения является правильный выбор маршрутизатора. Некачественный роутер может вызвать проблемы с сигналом Wi-Fi, низкую скорость интернета, перебои в соединении и другие неприятности.

### Лучшие роутеры

Ниже представлены модели маршрутизаторов от известных производителей, которые считаются одними из лучших на рынке.

### Keenetic

> **Keenetic Viva 1912**: Бюджетный маршрутизатор с хорошей скоростью и удобной прошивкой.  
> **Keenetic Sprinter**: Маршрутизатор среднего класса, подходящий для небольших квартир и домов.  
> **Keenetic Hopper**: Высокоскоростной маршрутизатор с поддержкой Wi-Fi 6.  
> **Keenetic Giga**: Маршрутизатор с гигабитными портами для высокоскоростного интернета.  
> **Keenetic Ultra KN-1811**: Высококлассный маршрутизатор с множеством возможностей и функций.  

### Asus

> **ASUS RT-AX1800U**: Маршрутизатор с поддержкой Wi-Fi 6.  
> **RT-AX86U**: Высокоскоростной маршрутизатор с широким набором функций.  
> **RT-AX86S**: Компактный маршрутизатор с Wi-Fi 6.  
> **RT-AC68U**: Популярный маршрутизатор с отличным соотношением цены и качества.  
> **RT-AC66U B1**: Маршрутизатор с поддержкой технологии MU-MIMO.  

### Ubiquiti

> **Edge Router X**: Высокопроизводительный маршрутизатор для бизнеса.  
> **ER4**: Маршрутизатор среднего класса с поддержкой VPN и других функций.  

### MikroTik

> **MikroTik hAP ac v3**: Маршрутизатор с поддержкой Wi-Fi ac.  
> **MikroTik hAP ax v2**: Маршрутизатор с поддержкой Wi-Fi 6.  

### TP Link

> **Archer C20**: Бюджетный маршрутизатор с хорошей скоростью и стабильностью.  
> **Archer C50**: Маршрутизатор с поддержкой двух диапазонов.  
> **Archer C5 AC1200**: Маршрутизатор с поддержкой Wi-Fi ac.  
> **Archer C6**: Маршрутизатор с широким набором функций.  
> **Archer A6**: Компактный маршрутизатор с поддержкой Wi-Fi ac.  

### Xiaomi

> **Xiaomi Mi Router 4A Gigabit Edition**: Бюджетный маршрутизатор с гигабитными портами.  
> **Xiaomi AX3200 / Redmi AX6S**: Маршрутизатор с поддержкой Wi-Fi 6.  
> **Xiaomi Redmi AX6000**: Высококлассный маршрутизатор с множеством функций и высокой скоростью.  

### Дополнительные ресурсы

# SpeedGuide.net

SpeedGuide.net — это ресурс, посвященный широкополосным интернет-соединениям, сетевой безопасности, беспроводным сетям и производительности систем. В этом гиде мы рассмотрим основные разделы сайта и полезные инструменты, которые помогут вам оптимизировать ваше интернет-соединение и улучшить сетевую безопасность.

## Основные разделы сайта

1. **Широкополосные соединения**
   - Информация о различных типах широкополосных соединений, таких как DSL и кабельные модемы.
   - Рекомендации по выбору провайдера и оборудованию.

2. **Сетевая безопасность**
   - Советы по защите вашей сети от угроз и уязвимостей.
   - Рекомендации по настройке маршрутизаторов и брандмауэров.

3. **Беспроводные сети**
   - Информация о настройке и оптимизации Wi-Fi сетей.
   - Советы по улучшению качества сигнала и скорости соединения.

4. **Производительность систем**
   - Рекомендации по улучшению производительности TCP/IP в сетях с высокой скоростью и задержками.

## Полезные инструменты

### 1. TCP Analyzer
- **Ссылка:** [TCP Analyzer](https://www.speedguide.net/analyzer.php)
- **Описание:** Этот инструмент позволяет анализировать параметры вашего TCP-соединения и выявлять возможные проблемы, которые могут влиять на скорость интернета.

### 2. TCP Optimizer
- **Ссылка:** [TCP Optimizer](https://www.speedguide.net/downloads.php)
- **Описание:** Программа для оптимизации настроек TCP/IP на вашем компьютере. Она помогает улучшить производительность интернет-соединения, изменяя параметры, такие как MTU, RWIN и другие.

### 3. Тест скорости
- **Ссылка:** [Тест скорости](https://www.speedguide.net/speedtest/)
- **Описание:** Инструмент для проверки скорости вашего интернет-соединения. Он измеряет скорость загрузки и выгрузки данных, а также задержку.

### 4. Сканирование безопасности
- **Ссылка:** [Сканирование безопасности](https://www.speedguide.net/scan.php)
- **Описание:** Этот инструмент позволяет проверить вашу сеть на наличие уязвимостей и потенциальных угроз.

### 5. IP Locator
- **Ссылка:** [IP Locator](https://www.speedguide.net/ip/)
- **Описание:** Инструмент для определения местоположения IP-адреса. Полезен для анализа сетевой активности и выявления подозрительных подключений.

### 6. Маршрутизаторы
- **Ссылка:** [Маршрутизаторы](https://www.speedguide.net/broadband-list.php)
- **Описание:** Список маршрутизаторов с информацией о их характеристиках и производительности. Помогает выбрать подходящее оборудование для вашей сети.

### 7. Порты TCP/IP
- **Ссылка:** [Порты TCP/IP](https://www.speedguide.net/ports.php)
- **Описание:** Справочник по портам TCP/IP, включая информацию о стандартных портах и их назначении.

## Заключение

SpeedGuide.net предлагает множество ресурсов и инструментов для оптимизации интернет-соединения и повышения сетевой безопасности. Используйте представленные инструменты для анализа и улучшения вашей сети, чтобы обеспечить стабильное и быстрое соединение.


## Заключение

Выбор правильного маршрутизатора — это важный шаг к обеспечению стабильного и быстрого интернет-соединения. Учитывая разнообразие моделей и технологий, представленных на рынке, важно тщательно оценить свои потребности и требования. Правильный маршрутизатор не только улучшит качество соединения, но и обеспечит надежность работы всех ваших устройств в сети.

Не забывайте о регулярном обновлении прошивки маршрутизатора и драйверов сетевых адаптеров, чтобы поддерживать оптимальную производительность и безопасность. Также учитывайте, что дополнительные функции, такие как поддержка Wi-Fi 6, MU-MIMO и VPN, могут значительно повысить эффективность работы вашей сети.

Следуя рекомендациям и советам, представленным в этом гайде, вы сможете выбрать идеальный маршрутизатор, который будет соответствовать вашим требованиям и обеспечит высокую производительность в любых сценариях использования, будь то работа, игры или потоковое видео. Помните, что инвестиции в качественное сетевое оборудование — это инвестиции в комфорт и продуктивность вашей работы и досуга.
